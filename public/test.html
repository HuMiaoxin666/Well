<html lang="en">

<head>
    <meta charset="UTF-8">
    <link href="css/bootstrap-switch.min.css" rel="stylesheet">
    <link rel="stylesheet" href="http://jqueryui.com/resources/demos/style.css">
    <script src="https://cdn.bootcss.com/handlebars.js/2.0.0/handlebars.min.js"></script>
    <link href="css/jquery-ui.min.css" rel="stylesheet">
    <link href="css/bootstrap-theme.min.css" rel="stylesheet" />
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/dashboard.css" type="text/css" rel="stylesheet">
    <link href="css/bootstrap-combobox.css" type="text/css" rel="stylesheet">

    <title>E-Commerce</title>

    <script src="js/jquery-3.3.1.min.js"></script>

    <script src="js/d3.v4.min.js"></script>

    <script src="js/jquery-ui.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/bootstrap.js"></script>
    <title>Handlebars教程</title>
    <style>
        .card {
            font-size: 30px;
            background-color: #abbccc;
            margin: 20px;
            float: left;
        }
    </style>

</head>

<body>


    <nav class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0">
        <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="#">Company name</a>
        <input class="form-control form-control-dark w-100" type="text" placeholder="Search" aria-label="Search">
        <ul class="navbar-nav px-3">
            <li class="nav-item text-nowrap">
                <a class="nav-link" href="#">Sign out</a>
            </li>
        </ul>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <nav class="col-md-2 d-none d-md-block bg-light sidebar">
                <div class="sidebar-sticky">
                    <ul class="nav flex-column">

                        <li class="nav-item">

                            <a class="nav-link" href="#">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round" class="feather feather-users">
                                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="9" cy="7" r="4"></circle>
                                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                                </svg>
                                <span data-feather="users"></span>
                                用户
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                    <polyline points="14 2 14 8 20 8"></polyline>
                                    <line x1="16" y1="13" x2="8" y2="13"></line>
                                    <line x1="16" y1="17" x2="8" y2="17"></line>
                                    <polyline points="10 9 9 9 8 9"></polyline>
                                </svg>
                                <span data-feather="file-text"></span>
                                待审核记录
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                    <polyline points="14 2 14 8 20 8"></polyline>
                                    <line x1="16" y1="13" x2="8" y2="13"></line>
                                    <line x1="16" y1="17" x2="8" y2="17"></line>
                                    <polyline points="10 9 9 9 8 9"></polyline>
                                </svg>
                                <span data-feather="file-text"></span>
                                提交记录
                            </a>
                        </li>
                    </ul>

                </div>
            </nav>


            <main role="main" class="col-md-9 ml-sm-auto col-lg-10 pt-3 px-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
                    <h1 class="h2">数据审核</h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <div class="btn-group mr-2">
                            <button class="btn btn-sm btn-outline-secondary">提交</button>
                            <button class="btn btn-sm btn-outline-secondary">全选</button>
                        </div>
                        <button class="btn btn-sm btn-outline-secondary dropdown-toggle">
                            <span data-feather="calendar"></span>
                            本周
                        </button>
                    </div>
                </div>


                <div class="table-responsive">
                    <table class="table table-striped table-sm">
                        <thead>
                            <tr>
                                <th>用户</th>
                                <th>数据类型</th>
                                <th>数据大小</th>
                                <th>提交日期</th>
                                <th>审核状态</th>
                            </tr>
                        </thead>
                        <tbody id="test">

                        </tbody>
                    </table>
                </div>
                <div class="starter-template" id="yes">
                    <h1>审核完毕</h1>
                    <p class="lead">如有审核失误，前往提交记录选项进行修改.</p>
                </div>
            </main>
        </div>
    </div>
    <script src="https://cdn.bootcss.com/handlebars.js/2.0.0/handlebars.min.js"></script>
    <script type="text/x-handlebars-template" id="myTemplate">
        {{#each this}}
        <tr>
            <td>{{name}}</td>
            <td>{{birth}}</td>
            <td>{{home}}</td>
            <td>{{job}}</td>
            <td>
                <label class="checkbox-inline">
                    <input type="checkbox" id="inlineCheckbox_{{name}}" value="option1"> 通过
                </label>
            </td>
        </tr>
        {{/each}}
    </script>
    <script type="text/javascript">
        d3.json("1.csv", function (data) {
            console.log('data: ', data);
            var temp_data = [{
                    name: '凯文米特尼克',
                    birth: '1963年8月6日',
                    home: '美国洛杉矶',
                    job: '网络安全咨询师'
                },
                {
                    name: '沃兹尼亚克',
                    birth: '1950年8月11日',
                    home: '美国加利福利亚',
                    job: '电脑工程师'
                }
            ];

            var tpl = document.getElementById('myTemplate').innerHTML
            // Handlebars编译模板，返回一个可执行函数

            var template = Handlebars.compile(tpl)
            // 传入数据，得到编译后的html

            var html = template(temp_data)
            // 将编译完成的html显示到网页

            document.getElementById('test').innerHTML = html

            document.getElementById("yes").style.display = "none";
            $("#selectAll").on("click", function () {
                if (variable.selectAll == false) {
                    variable.selectAll = true;
                    temp_data.forEach(elment =>{
                        console.log('"#inlineCheckbox_" + elment.name: ', "#inlineCheckbox_" + elment.name);
                        $("#inlineCheckbox_" + elment.name).prop({
                            checked: true
                        });
                    })
                } else {
                    variable.selectAll = false;
                    temp_data.forEach(elment =>{
                        $("#inlineCheckbox_" + elment.name).prop({
                            checked: false
                        });
                    })
                }

            })

            $("#submit").on("click", function () {
                $.confirm({
                    title: '确认提交?',
                    type: 'blue',
                    buttons: {
                        ok: {
                            text: "确认",
                            btnClass: 'btn-primary',
                            keys: ['enter'],
                            action: function () {
                                document.getElementById("yes").style.display = "block";
                                document.getElementById("no").style.display = "none";
                                console.log('the user clicked confirm');
                            }
                        },
                        cancel: {
                            text: "取消"
                        }
                    }
                });
            })
            
 


        })
    </script>
</body>

</html>